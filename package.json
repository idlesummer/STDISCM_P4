{
  "name": "stdiscm-p4",
  "version": "1.0.0",
  "private": true,
  "description": "STDISCM Machine Learning Project",
  "scripts": {
    "gen": "npm run gen-py && npm run gen-ts",
    "gen-py": "npm run gen-py:clean && npm run gen-py:generate && npm run gen-py:fix",
    "gen-py:clean": "mkdir -p apps/server/src/proto && rm -f apps/server/src/proto/metrics_pb2.py apps/server/src/proto/metrics_pb2.pyi apps/server/src/proto/metrics_pb2_grpc.py",
    "gen-py:generate": "cd apps/server && uv run python -m grpc_tools.protoc -I ../../packages/proto --python_out=src/proto --grpc_python_out=src/proto --pyi_out=src/proto ../../packages/proto/metrics.proto",
    "gen-py:fix": "cd apps/server && uv run python -c \"open('src/proto/__init__.py', 'w').write('# Generated gRPC proto stubs\\n')\" && uv run python -c \"import sys; data = open('src/proto/metrics_pb2_grpc.py').read(); open('src/proto/metrics_pb2_grpc.py', 'w').write(data.replace('import metrics_pb2 as metrics__pb2', 'from . import metrics_pb2 as metrics__pb2'))\"",
    "gen-ts": "npm run gen-ts:clean && npm run gen-ts:generate",
    "gen-ts:clean": "mkdir -p apps/dashboard/src/proto && rm -f apps/dashboard/src/proto/metrics_pb.js apps/dashboard/src/proto/metrics_pb.d.ts apps/dashboard/src/proto/metrics_grpc_pb.js apps/dashboard/src/proto/metrics_grpc_pb.d.ts",
    "gen-ts:generate": "cd apps/dashboard && npx grpc_tools_node_protoc --js_out=import_style=commonjs,binary:src/proto --grpc_out=grpc_js:src/proto --plugin=protoc-gen-grpc=node_modules/.bin/grpc_tools_node_protoc_plugin -I ../../packages/proto ../../packages/proto/metrics.proto && npx grpc_tools_node_protoc --plugin=protoc-gen-ts=node_modules/.bin/protoc-gen-ts --ts_out=grpc_js:src/proto -I ../../packages/proto ../../packages/proto/metrics.proto"
  },
  "workspaces": [
    "apps/dashboard",
    "apps/server"
  ]
}
